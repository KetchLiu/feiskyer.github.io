---
title: KubeCon/CloudNativeCon 2016见闻
date: 2016-11-14 09:49:52
tags: [kubernetes, kubecon]
---

## Self-hosts Kubernetes

基本的idea是用Kubernetes来管理Kubernetes的部署和升级，这也是一个孵化状态的项目[bootkube](https://github.com/kubernetes-incubator/bootkube)。由于kubelet初始化需要控制平面的配合，bootkube会在一开始的时候会启动一个暂时的控制平面（api-server, scheduler, controller manager），部署完成后再替换回来。

部署前将bootkube作为控制平面：

![bootkube-1](/images/bootkube-1.png)

部署后替换成真正的控制平面：

![bootkube-2](/images/bootkube-2.png)


相关文档

- [Incubator BootKube](https://github.com/kubernetes-incubator/bootkube)
- [Slide](https://speakerdeck.com/philips/kubecon-2016-self-hosted-scale-and-federation-with-kubernetes-v1-dot-4-and-beyond)
- [Design of bootkube](https://docs.google.com/document/d/1VNp4CMjPPHevh2_JQGMl-hpz9JSLq3s7HlI87CTjl-8/edit)
- [Blog of self-booted kubernetes](https://coreos.com/blog/self-hosted-kubernetes.html)
- [Kubelet as a Container and Self-Hosted Kubernetes](https://docs.google.com/document/d/1_I6xT0XHCoOqZUT-dtpxzwvYpTR5JmFQY0S4gL2PPkU/edit#heading=h.yeahbhtih70g)

## F2F

**[Sig-node F2F](https://docs.google.com/document/d/1ZVQIzLuHsBFDCw-QLO30rqRlSNSc1xynfs9GAFrjeVc/edit)**

- Performance-Sensitive Application Platform
    - 高性能应用的场景，比如telecom, HFT等，需要NUMA、GPU、sysctls、hugepage、cpuset等等的支持。
    - 一个idea是通过daemonset并配合NodeAllocatable
- CRI blockers and progress
    - 1.5的feature基本完成，只剩下一些bug fixes
    - per-pod cgroups
    - monitoring
    - api versioning
    - hostport network
    - metrics
    - CRI validation tests
    - auth
- Runtime agnostic debugging tools
    - CLI for CRI?
- NodeSpec standardization
- Packaging

**[OCI F2F](https://docs.google.com/document/d/1wtJeXhiVOL7qdDK_zouZPjskTIrsOLmD-9Ij478y7_Y/edit)**

最主要的是`Runtime CLI Spec`和`Image Spec rc3`。比较有趣的是[systemd wrapper / rkt wrapper for OCI runtime-spec CLI](https://github.com/vbatts/nspawn-oci)，rkt也要加入OCI的大营。

## Developer Summit

**[Scaling the Kubernetes CodeBase](https://docs.google.com/presentation/d/1SD6a6eJl47t0qyTFE8GzaiytW4T_crdWgYAMCaLy1W8)**

Kubernetes使用github来管理代码库，但现在碰到了明显的瓶颈：从2015年下半年开始[merge时间明显加长](http://velodrome.k8s.io/dashboard/db/kubernetes-developer-velocity)，open issues和PRs一直再增长，大量无关紧要的github通知等等。未来计划将Kubernetes的代码拆分到多个repo中，kuberentes代码库只保留核心代码，并通过Extension mechanism来支持各种功能：

- Apiserver federation
- Authorization hooks
- Admission-control hooks
- Initializers and finalizers
- ThirdPartyResource
- Kubectl extensions
- Service Broker, Operators
- Controller pattern
- External cloudproviders
- CRI, network, and storage plugins
- Cluster addons: UI, monitoring, logging
- Feature gates, feature discovery, dependency management

更多记录见[这里](https://docs.google.com/document/d/1zN2DWKerXwbzxZTO52wBRqp_uHMdLp8P52xYOmp5WZ4/edit).

**其他的Summit简介**

- [Kubernetes 2017 Features & Roadmaps](https://docs.google.com/presentation/d/1dFfN3_9VM4cRKknZB9_0wsM_1YLJToRTEx7dX6BoEhI) [Roadmap](https://docs.google.com/spreadsheets/d/154cAee2mOn3LoQDgpgG2ZzAIdIlQ_KnMlghGjnGwQ1w)
    * Scale the project (tablestakes)
    * Reference architectures for application workflows
    * Secure multi-tenancy with service catalog
    * Production ready cluster lifecycle
    * Multi-cloud support for AWS / Azure / on premises
- [Cluster Lifecycle Deployment & Upgrade Roadmap](https://docs.google.com/document/d/11kK39Zz3zxIY9-GFa8buqqWYOrctFQ7hvOw5NBFwJL0/edit#heading=h.n0vlwrfu65r1)
    - HA
    - Upgrades
    - Config Management
    - Toolbox vs. guided flow
    - Documentation
    - Conformance Testing
    - PKI
- [Documentation](https://docs.google.com/presentation/d/1GFuKgN-1kMmcg41T9HsasP8YEWtMAipEibYnwGkQuHo) and [here](https://docs.google.com/document/d/1VYoVl63Iq2QSKxpoV7HGXmWasxU5EQCAuoIItj-ODvM/edit)
- [K8s Dev Summit: Outstanding Issues and PRs](https://docs.google.com/document/d/1cJhpjRcXpTmTWQswEfBqSbrfqrawtD9ZlWW30Q3BWv4/edit)
    - Issues 4600+, PRs 600+，还在不断增长中
    - [Sig Contribx](https://github.com/kubernetes/community/tree/master/sig-contribx)会跟进处理这个问题
- [Multi-tenancy](https://docs.google.com/document/d/1WmRwT3nhLXTYRLKlj9rjZmEXv3BEu7TFX29nuaO3enA/edit#heading=h.w90umf5dyer3)
- [Azure & AWS Kubernetes Discussion](https://docs.google.com/document/d/1X5i-Z3GsFyknxq4LyB3cObXEm5ds7DTUYOKwHAMHK5A/edit)
- [Contrib notes](https://docs.google.com/document/d/1klHgGFKtSPHGNlG24LDb5-ornBUtZLcUnEjF8XKXDes/edit) and [On developer onboarding](https://docs.google.com/document/d/19B2vcK6Y3xE3JO7sd4n6lPF0m9bBVZpNucvcR3MwEXA/edit)
- [Compute resource management](https://docs.google.com/document/d/1p7scsTPzPyouktBFTxu4RhRwW8yUn5Lj7VGY9SaOo-8/edit)
- [Logging volumes](https://docs.google.com/document/d/1K2hh7nQ9glYzGE-5J7oKBB7oK3S_MKqwCISXZK-sB2Q/edit)



